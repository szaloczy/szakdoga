<!-- My Hours Modal -->
@if (show) {
<div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
  <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">
          <i class="bi bi-clock-history me-2"></i>
          {{ 'dashboard.student.my_hours.title' | translate }}
        </h5>
        <button type="button" class="btn-close btn-close-white" (click)="close()"></button>
      </div>
      <div class="modal-body">
        <!-- Filter Buttons -->
        <div class="mb-3">
          <div class="btn-group w-100" role="group">
            <button 
              type="button" 
              class="btn"
              [ngClass]="selectedFilter === 'all' ? 'btn-primary' : 'btn-outline-primary'"
              (click)="setFilter('all')">
              <i class="bi bi-list-ul me-1"></i>
              {{ 'dashboard.student.my_hours.all' | translate }} ({{ hoursByStatus.all }})
            </button>
            <button 
              type="button" 
              class="btn"
              [ngClass]="selectedFilter === 'approved' ? 'btn-success' : 'btn-outline-success'"
              (click)="setFilter('approved')">
              <i class="bi bi-check-circle me-1"></i>
              {{ 'dashboard.student.my_hours.approved' | translate }} ({{ hoursByStatus.approved }})
            </button>
            <button 
              type="button" 
              class="btn"
              [ngClass]="selectedFilter === 'pending' ? 'btn-warning' : 'btn-outline-warning'"
              (click)="setFilter('pending')">
              <i class="bi bi-hourglass-split me-1"></i>
              {{ 'dashboard.student.my_hours.pending' | translate }} ({{ hoursByStatus.pending }})
            </button>
            <button 
              type="button" 
              class="btn"
              [ngClass]="selectedFilter === 'rejected' ? 'btn-danger' : 'btn-outline-danger'"
              (click)="setFilter('rejected')">
              <i class="bi bi-x-circle me-1"></i>
              {{ 'dashboard.student.my_hours.rejected' | translate }} ({{ hoursByStatus.rejected }})
            </button>
          </div>
        </div>

        @if (filteredHours.length === 0) {
          <div class="text-center text-muted py-5">
            <i class="bi bi-clock fs-1 d-block mb-3"></i>
            <p>{{ 'dashboard.student.my_hours.no_hours' | translate }}</p>
          </div>
        } @else {
          <!-- Hours Table -->
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th>{{ 'dashboard.student.my_hours.date' | translate }}</th>
                  <th>{{ 'dashboard.student.my_hours.time' | translate }}</th>
                  <th>{{ 'dashboard.student.my_hours.duration' | translate }}</th>
                  <th>{{ 'dashboard.student.my_hours.description' | translate }}</th>
                  <th class="text-center">{{ 'dashboard.student.my_hours.status' | translate }}</th>
                </tr>
              </thead>
              <tbody>
                @for (hour of filteredHours; track hour.id) {
                  <tr>
                    <td>
                      <i class="bi bi-calendar me-1"></i>
                      {{ hour.date | date:'yyyy.MM.dd' }}
                    </td>
                    <td>
                      <i class="bi bi-clock me-1"></i>
                      {{ hour.startTime }} - {{ hour.endTime }}
                    </td>
                    <td>
                      <span class="badge bg-info">
                        <i class="bi bi-stopwatch me-1"></i>
                        {{ calculateDuration(hour.startTime, hour.endTime) }}
                      </span>
                    </td>
                    <td>
                      <div class="description-text">
                        {{ hour.description }}
                      </div>
                    </td>
                    <td class="text-center">
                      <span class="badge" [ngClass]="getStatusBadgeClass(hour.status)">
                        <i class="{{getStatusIcon(hour.status)}} me-1"></i>
                        {{ 'dashboard.student.my_hours.status_' + hour.status | translate }}
                      </span>
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>

          <!-- Summary -->
          <div class="alert alert-info mt-3">
            <div class="row text-center">
              <div class="col-md-3">
                <strong>{{ 'dashboard.student.my_hours.total' | translate }}:</strong>
                <div class="fs-4">{{ filteredHours.length }}</div>
              </div>
              <div class="col-md-3">
                <strong class="text-success">{{ 'dashboard.student.my_hours.approved' | translate }}:</strong>
                <div class="fs-4 text-success">{{ hoursByStatus.approved }}</div>
              </div>
              <div class="col-md-3">
                <strong class="text-warning">{{ 'dashboard.student.my_hours.pending' | translate }}:</strong>
                <div class="fs-4 text-warning">{{ hoursByStatus.pending }}</div>
              </div>
              <div class="col-md-3">
                <strong class="text-danger">{{ 'dashboard.student.my_hours.rejected' | translate }}:</strong>
                <div class="fs-4 text-danger">{{ hoursByStatus.rejected }}</div>
              </div>
            </div>
          </div>
        }
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="close()">
          <i class="bi bi-x-circle me-2"></i>
          {{ 'dashboard.student.my_hours.close' | translate }}
        </button>
      </div>
    </div>
  </div>
</div>
}
