
<div class="simple-upload-container">
  <h2>{{ 'document_upload.title.text' | translate }}</h2>
  <form (submit)="$event.preventDefault(); uploadFile()">
    <label class="custom-file-label">
      <input type="file" accept="application/pdf" (change)="onFileSelected($event)" [disabled]="uploading" style="display:none;" #fileInput />
      <button type="button" class="btn btn-outline-secondary p-2" [disabled]="uploading" (click)="fileInput.click()">
        {{ 'buttons.forms.document_upload.upload_section.choose_file.text' | translate }}
      </button>
      <span class="ms-2">
        {{ selectedFile?.name || ('document_upload.upload_section.no_file.text' | translate) }}
      </span>
    </label>
    <button type="submit" [disabled]="!selectedFile || uploading">{{ 'document_upload.upload_section.upload_button.text' | translate }}</button>
  </form>
  @if(uploadError){
  <div class="error">{{ uploadError }}</div>
  }
  @if (uploadSuccess) {
  <div class="success">{{ 'document_upload.upload_section.success.text' | translate }}</div>
  }
  @if (uploading) {
    <div class="loading">{{ 'document_upload.upload_section.uploading.text' | translate }}</div>
  }

  <hr />
  <h3>{{ 'document_upload.documents_section.title.text' | translate }}</h3>
  @if (loadingDocs) {
  <div class="loading">{{ 'document_upload.uploaded_documents.loading.text' | translate }}</div>
  }
  @if (!loadingDocs && documents.length === 0) {
    <div class="empty">{{ 'document_upload.upload_section.empty.text' | translate }}</div>
  }
  @if (!loadingDocs && documents.length > 0) {
  <ul class="doc-list">
    @for (doc of documents; track doc) {
    <li class="doc-item">
      <div class="doc-main">
        <span class="doc-name">{{ doc.originalName }}</span>
        <span class="doc-date">{{ doc.uploadedAt | date:'yyyy.MM.dd HH:mm' }}</span>
        <span class="doc-status" [ngClass]="doc.status">
          <ng-container [ngSwitch]="doc.status">
            @switch (doc.status) {
              @case('pending'){<span class="badge pending">{{ 'admin_panel.document_management.states.pending.text' | translate }}</span>}
              @case('approved'){<span *ngSwitchCase="'approved'" class="badge approved">{{ 'admin_panel.document_management.states.approved.text' | translate }}</span>}
              @case('rejected'){<span *ngSwitchCase="'rejected'" class="badge rejected">{{ 'admin_panel.document_management.states.rejected.text' | translate }}</span>}
            }
          </ng-container>
        </span>
      </div>
      @if (doc.reviewNote) {
      <div class="review-note">{{ doc.reviewNote }}</div>
      }
    </li>
    }
  </ul>
  }
</div>
